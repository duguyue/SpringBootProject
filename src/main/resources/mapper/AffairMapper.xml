<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="org.lindl.mapper.AffairMapper">

    <insert id="addAffair" parameterType="org.lindl.entity.Affair">
        insert INTO affair
        <trim prefix="(" suffix=")" suffixOverrides="," >
            <if test="userId != null and userId !=''"  >
                USER_ID,
            </if>
            <if test="content != null and content !=''"  >
                CONTENT,
            </if>
            <if test="planStartTime != null and planStartTime !=''"  >
                PLAN_START_TIME,
            </if>
            <if test="planEndTime != null and planEndTime !=''"  >
                PLAN_END_TIME,
            </if>
            <if test="rank != null and rank !=''"  >
                RANK,
            </if>
            <if test="addContent != null and addContent !=''"  >
                REMARK,
            </if>
            <if test="belongToType != null and belongToType !=''"  >
                BELONG_TO_TYPE,
            </if>
            <if test="alarmTime != null and alarmTime !=''"  >
                ALARM_TIME,
            </if>
            <if test="notificatonId != null and notificatonId !=''"  >
                NOTIFICATION_ID,
            </if>
            CREATE_TIME
        </trim>
        <trim prefix="values (" suffix=")" suffixOverrides="," >
            <if test="userId != null and userId !=''" >
                #{userId,jdbcType=VARCHAR},
            </if>
            <if test="content != null and content !=''" >
                #{content,jdbcType=VARCHAR},
            </if>
            <if test="planStartTime != null and planStartTime !=''" >
                #{planStartTime,jdbcType=VARCHAR},
            </if>
            <if test="planEndTime != null and planEndTime !=''" >
                #{planEndTime,jdbcType=VARCHAR},
            </if>
            <if test="rank != null and rank !=''" >
                #{rank,jdbcType=INTEGER},
            </if>
            <if test="addContent != null and addContent !=''" >
                #{addContent,jdbcType=VARCHAR},
            </if>
            <if test="belongToType != null and belongToType !=''" >
                #{belongToType,jdbcType=INTEGER},
            </if>
            <if test="alarmTime != null and alarmTime !=''" >
                #{alarmTime,jdbcType=INTEGER},
            </if>
            <if test="notificatonId != null and notificatonId !=''" >
                #{notificatonId,jdbcType=INTEGER},
            </if>
            now()
        </trim>
    </insert>

    <select id="queryAffairs" resultType="org.lindl.entity.Affair">
        SELECT * FROM affair
    </select>

    <delete id="deleteAffair">
        DELETE FROM affair WHERE ID=#{id}
    </delete>

    <select id="queryAffairById" resultType="org.lindl.entity.Affair">
        SELECT * FROM affair WHERE ID=#{id}
    </select>
    <update id="updateAffair" parameterType="org.lindl.entity.Affair">
        UPDATE affair
        <set>
            <if test="content != null and content !=''" >
                CONTENT=#{content},
            </if>
            <if test="address != null and address !=''" >
                ADDRESS=#{address},
            </if>
            <if test="planStartTime != null and planStartTime !=''" >
                PLAN_START_TIME=#{planStartTime},
            </if>
            <if test="planEndTime != null and planEndTime !=''" >
                PLAN_END_TIME=#{planEndTime},
            </if>
            <if test="rank != null and rank !=''" >
                RANK=#{rank},
            </if>
            <if test="addContent != null and addContent !=''" >
                REMARK=#{addContent},
            </if>
            <if test="belongToType != null and belongToType !=''" >
                BELONG_TO_TYPE=#{belongToType},
            </if>
            <if test="alarmTime != null and alarmTime !=''" >
                ALARM_TIME=#{alarmTime},
            </if>
            <if test="notificatonId != null and notificatonId !=''" >
                NOTIFICATION_ID=#{notificatonId},
            </if>
            UPDATE_TIME=now()
        </set>

        <where>
            ID=#{id}
        </where>
    </update>
</mapper>